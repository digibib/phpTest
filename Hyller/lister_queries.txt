## related books

PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX fabio: <http://purl.org/spar/fabio/>
PREFIX deich: <http://data.deichman.no/>

select distinct ?book (sql:group_digest(?authorName, ', ', 1000, 1)) as ?authorName ?title (sql:sample(?image)) as ?image where {
 <$originUri> dct:creator ?creator .
 ?creator foaf:name ?authorName .
 ?work fabio:hasManifestation <$originUri> .
 {?work deich:similarWork ?similarWork .} UNION {?work deich:autoGeneratedSimilarity ?similarWork .}
 ?similarWork fabio:hasManifestation ?book .
 MINUS {?work fabio:hasManifestation ?book .}
 MINUS {?book dct:creator ?creator .}
 ?book dct:format <http://data.deichman.no/format/Book> ;
  dct:title ?title .
 OPTIONAL { ?book foaf:depiction ?image .}
}





## same author books

PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX fabio: <http://purl.org/spar/fabio/>

SELECT DISTINCT ?book ?authorName ?title where {
 <{$originUri}> dct:creator ?creator .
 ?work fabio:hasManifestation <$originUri> .
 ?book dct:format <http://data.deichman.no/format/Book> ;
  dct:creator ?creator ;
  dct:title ?title .
 OPTIONAL {?book foaf:depiction ?image . }
 MINUS {?work fabio:hasManifestation ?book .}
}